<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: SelectOptions.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: SelectOptions.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module SelectOptions */
import * as Contents from "./Contents.js";
import * as Grouping from "./Grouping.js";
import InfoBox from "./InfoBox.js";

/**
 * The NeonView parent to call editor actions.
 * @type {NeonView}
 */
var neonView;

/**
 * Initialize NeonView for this and {@link module:Grouping}
 * @param {NeonView} view - The parent NeonView.
 */
export function initNeonView(view) {
    neonView = view;
    Grouping.initNeonView(view);
}

//TODO: CHANGE NAVABAR-LINK TO PROPER ICON//
/**
 * Trigger the extra nc action menu.
 * @param {Array.SVGSVGElement} lastSelect - The last selected elements.
 */
export function triggerNcActions(lastSelect) {
    endOptionsSelection();
    $("#moreEdit").removeClass("is-invisible");
    $("#moreEdit").append(Contents.ncActionContents);

    $("#Punctum.dropdown-item").on("click", (evt) => {
        let unsetInclinatum = {
            "action": "set",
            "param": {
                "elementId": lastSelect[0].id,
                "attrType": "name",
                "attrValue": ""
            }
        };
        let unsetVirga = {
            "action": "set",
            "param": {
                "elementId": lastSelect[0].id,
                "attrType": "diagonalright",
                "attrValue": ""
            }
        };
        neonView.edit({ "action": "chain", "param": [ unsetInclinatum, unsetVirga ]});
        neonView.refreshPage();
    });

    $("#Inclinatum.dropdown-item").on("click", (evt) => {
        let setInclinatum = {
            "action": "set",
            "param": {
                "elementId": lastSelect[0].id,
                "attrType": "name",
                "attrValue": "inclinatum"
            }
        };
        let unsetVirga = {
            "action": "set",
            "param": {
                "elementId": lastSelect[0].id,
                "attrType": "diagonalright",
                "attrValue": ""
            }
        };
        neonView.edit({ "action": "chain", "param": [ setInclinatum, unsetVirga ]});
        neonView.refreshPage();
    });

    $("#Virga.dropdown-item").on("click", (evt) => {
        let unsetInclinatum = {
            "action": "set",
            "param": {
                "elementId": lastSelect[0].id,
                "attrType": "name",
                "attrValue": ""
            }
        };
        let setVirga = {
            "action": "set",
            "param": {
                "elementId": lastSelect[0].id,
                "attrType": "diagonalright",
                "attrValue": "u"
            }
        };
        neonView.edit({ "action": "chain", "param": [ unsetInclinatum, setVirga ]});
        neonView.refreshPage();
    });

    initOptionsListeners();
}

/**
 * Trigger extra neume actions.
 */
export function triggerNeumeActions() {
    endOptionsSelection()
    $("#moreEdit").removeClass("is-invisible");
    $("#moreEdit").append(Contents.neumeActionContents);
    var neume = $(".selected");
    if (neume.length != 1){
        console.warn("More than one neume selected! Cannot trigger Neume ClickSelect actions.");
        return;
    }

    $(".grouping").on("click", (e) => {
        var contour = InfoBox.getContourByValue(e.target.id);
        triggerChangeGroup(contour);
    });

    function triggerChangeGroup(contour) {
        let changeGroupingAction = {
            "action": "changeGroup",
            "param": {
                "elementId": neume[0].id,
                "contour": contour
            }
        }
        neonView.edit(changeGroupingAction);
        neonView.refreshPage();
    }
    initOptionsListeners();
}

/**
 * Trigger extra syllable actions.
 */
export function triggerSylActions() {
    endOptionsSelection()
    $("#moreEdit").removeClass("is-invisible");
    $("#moreEdit").append(
        "&lt;div>&lt;p class='control'>" +
        "&lt;button class='button' id='ungroupNeumes'>Ungroup&lt;/button>&lt;/p>&lt;/div>"
    );
    Grouping.initGroupingListeners();
}

/**
 * Trigger extra clef actions.
 */
export function triggerClefActions() {
    endOptionsSelection();
    $("#moreEdit").removeClass("is-invisible");
    $("#moreEdit").append(
        "&lt;label>Change Clef Shape:&amp;nbsp;&lt;/label>" +
        "&lt;div id='drop_select' class='dropdown'>" +
        "&lt;div class='dropdown-trigger'>" +
        "&lt;button id='select-options' class='button navbar-link' aria-haspopup='true' aria-controls='dropdown-menu'>" +
        "&lt;span>Clef Shapes&lt;/span>&lt;span class='icon is-small'>" +
        "&lt;i class=''>&lt;/i>&lt;/span>&lt;/button>&lt;/div>" +
        "&lt;div class='dropdown-menu' id='dropdown-menu' role='menu'>" +
        "&lt;div class='dropdown-content'>" +
        "&lt;a id='Punctum' class='dropdown-item'>C Clef&lt;/a>" +
        "&lt;a id='Inclinatum' class='dropdown-item'>F Clef&lt;/a>&lt;/div>&lt;/div>&lt;/div>"
    );
    initOptionsListeners();
}

/**
 * Trigger extra staff actions.
 */
export function triggerStaffActions() {
    endOptionsSelection();
    $("#moreEdit").removeClass("is-invisible");
    $("#moreEdit").append(
        "&lt;label>Merge Systems:&amp;nbsp;&lt;/label>" +
        "&lt;div>&lt;p class='control'>" +
        "&lt;button id='merge-systems' class='button'>Merge&lt;/button>&lt;/p>&lt;/div>"
    );

    initOptionsListeners();

    $("#merge-systems").on("click", (evt) => {
        let systems = Array.from($(".staff.selected"));
        let elementIds = [];
        systems.forEach(staff => {
            elementIds.push(staff.id);
        });
        let editorAction = {
            "action": "merge",
            "param": {
                "elementIds": elementIds
            }
        };

        if (neonView.edit(editorAction)) {
            neonView.refreshPage();
        }
        else {
            alert("Could not merge systems. :(");
        }
    });
}

/**
 * End the extra options menu.
 */
export function endOptionsSelection () {
    $("#moreEdit").empty();
    $("#moreEdit").addClass("is-invisible");
}

/**
 * Initialize extra dropdown options.
 */
function initOptionsListeners(){
    $("#drop_select").on("click", function() {
        $(this).toggleClass("is-active");
    })
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Color.html">Color</a></li><li><a href="module-Contents.html">Contents</a></li><li><a href="module-Controls.html">Controls</a></li><li><a href="module-Cursor.html">Cursor</a></li><li><a href="module-Grouping.html">Grouping</a></li><li><a href="module-Neon.html">Neon</a></li><li><a href="module-Select.html">Select</a></li><li><a href="module-SelectOptions.html">SelectOptions</a></li><li><a href="module-Text.html">Text</a></li><li><a href="module-Warnings.html">Warnings</a></li><li><a href="module-Zoom.html">Zoom</a></li></ul><h3>Classes</h3><ul><li><a href="DragHandler.html">DragHandler</a></li><li><a href="EditMode.html">EditMode</a></li><li><a href="InfoBox.html">InfoBox</a></li><li><a href="InsertHandler.html">InsertHandler</a></li><li><a href="module-Neon-Neon.html">Neon</a></li><li><a href="module-Select.ClickSelect.html">ClickSelect</a></li><li><a href="module-Select.DragSelect.html">DragSelect</a></li><li><a href="module-Zoom.ViewBox.html">ViewBox</a></li><li><a href="module-Zoom-ZoomHandler.html">ZoomHandler</a></li><li><a href="NeonView.html">NeonView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Jul 26 2018 12:59:16 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
